<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
  // select all contents
  let dash = document.querySelector("#dashboardContent");
  let customer = document.querySelector("#customerContent");
  let item = document.querySelector("#itemContent");
  let order = document.querySelector("#orderContent");

  //select all the link and bind click events
  let lnkHome = document.querySelector("#lnkHome");
  let lnkCustomer = document.querySelector("#lnkCustomer");
  let lnkItem = document.querySelector("#lnkItem");
  let lnkOrder = document.querySelector("#lnkOrders");

  //hide all the 4 content sections and display only dashboard
  dash.style.display = 'block';
  customer.style.display = 'none';
  item.style.display = 'none';
  order.style.display = 'none';


  lnkHome.addEventListener("click", function () {
    dash.style.display = 'block';
    customer.style.display = 'none';
    item.style.display = 'none';
    order.style.display = 'none';
  })


  lnkCustomer.addEventListener("click", function () {
    dash.style.display = 'none';
    customer.style.display = 'block';
    item.style.display = 'none';
    order.style.display = 'none';
  })


  lnkItem.addEventListener("click", function () {
    dash.style.display = 'none';
    customer.style.display = 'none';
    item.style.display = 'block';
    order.style.display = 'none';
  })


  lnkOrder.addEventListener("click", function () {
    dash.style.display = 'none';
    customer.style.display = 'none';
    item.style.display = 'none';
    order.style.display = 'block';
  })





  //Customer Mange
  // let btnSave = document.querySelector("#btnCustomer");
  // let btnGetAll = document.querySelector("#btnGetAll");
  // let tBody = document.querySelector("#tblCustomer");

  //select 4 text fields
  // let txtID = document.querySelector("#txtCustomerID");
  // let txtName = document.querySelector("#txtCustomerName");
  // let txtAddress = document.querySelector("#txtCustomerAddress");
  // let txtSalary = document.querySelector("#txtCustomerSalary");


  //save a customer
  // btnSave.addEventListener("click", function () {
  //     //create customer object and fill all the data
  //     var customer = {
  //         id: txtID.value,
  //         name: txtName.value,
  //         address: txtAddress.value,
  //         salary: txtSalary.value
  //     }
  //     //add customer to object to the array
  //     customers.push(customer);
  //     console.log(customers);
  // });


  //load all customers from the array to the table
  // btnGetAll.addEventListener("click", function () {
  //     for (let i = 0; i < customers.length; i++) {
  //
  //         let tr = document.createElement("tr");
  //         let td1 = document.createElement("td");
  //         td1.textContent = customers[i].id;
  //         let td2 = document.createElement("td");
  //         td2.textContent = customers[i].name;
  //         let td3 = document.createElement("td");
  //         td3.textContent = customers[i].address;
  //         let td4 = document.createElement("td");
  //         td4.textContent = customers[i].salary;
  //         tr.append(td1, td2, td3, td4);
  //         tBody.append(tr);
  //     }
  //
  // });

  //temporary db
  var customers = [
    {id: "C001", name: "Dasun", address: "Galle", salary: 1000.22},
    {id: "C002", name: "Iman", address: "Mathara", salary: 2000.22}
  ];


  //refactor save with jQuery
  $("#btnCustomer").click(function () {

    let cus_ID = $("#txtCustomerID").val();
    let cus_Name = $("#txtCustomerName").val();
    let cus_Address = $("#txtCustomerAddress").val();
    let cus_Salary = $("#txtCustomerSalary").val();

    var customer = {
      id: cus_ID,
      name: cus_Name,
      address: cus_Address,
      salary: cus_Salary
    }

    //add customer to object to the array
    customers.push(customer);
    getAllCustomers();
    console.log(customers);
  });


  //refactor get_all with jQuery
  $("#btnGetAll").click(function () {
    getAllCustomers();
  });

  getAllCustomers();

  function getAllCustomers() {
    //remove all the child elements of tbody before adding the table rows
    $("#tblCustomer").empty();

    for (let i = 0; i < customers.length; i++) {
      let row = `<tr>
                            <td>${customers[i].id}</td>
                            <td>${customers[i].name}</td>
                            <td>${customers[i].address}</td>
                            <td>${customers[i].salary}</td>
                        </tr>`;
      $("#tblCustomer").append(row);
    }

    bindEvents();

  }

  bindEvents();

  function bindEvents(){
    $('#tblCustomer>tr').click(function () {
      // console.log(this);//tr -> this will return tr html element
      // console.log($(this));//jquery ob //if we want to access jQuery method we have to convert it to a jquery object
      // console.log($(this).text()); // now here it will return all the text of tr

      let id = $(this).children(':nth-child(1)').text();
      let name = $(this).children(':nth-child(2)').text();
      let address = $(this).children(':nth-child(3)').text();
      let salary = $(this).children(':nth-child(4)').text();

      setTextFieldValues(id,name,address,salary);
    });
  }
  //check this out.?


  function setTextFieldValues(id, name, address, salary) {
    $("#txtCustomerID").val(id);
    $("#txtCustomerName").val(name);
    $("#txtCustomerAddress").val(address);
    $("#txtCustomerSalary").val(salary);
  }



</script>

</body>
</html>